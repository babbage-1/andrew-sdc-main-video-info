config:
  target: "http://localhost:2000/main"
  phases:
    - duration: 120
      arrivalRate: 10
      rampTo: 20
      name: "Warm up the application"
    - duration: 600
      arrivalRate: 20
      name: "Sustained max load"
  payload:
    path: "newrelicId.csv"
    fields:
      - "id"
    skipHeader: true
  http:
    pool: 20
  ensure:
    maxErrorRate: 1
    p95: 2000
    max: 3000

scenarios:
  - name: "Senario to make 19 GET requests"
    weight: 5
    flow:
      - loop:
        - get:
            url: "/{{ id }}/read"
        - think: 5
        count: 19
  - name: "Secnario to make POST request"
    weight: 1
    flow:
      - think: 40
      - post:
          url: "/{{ id }}/create"
          json:
            name: "adipisci sit at"
            genre: "Romance|Fantasy"
            score: "3"
            runtime: "157"
            rating: "PG"
            releaseday: "23"
            releasemonth: "June"
            releaseyear: "1994"
            image: "https://s3.us-east-2.amazonaws.com/sdc-andrew-movie-posters/--anoWjsY-8.jpg"


